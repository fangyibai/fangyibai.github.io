<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://fangyibai.github.io</id>
    <title>æ–¹ä¹™ç™¾Notes</title>
    <updated>2020-03-21T16:53:36.103Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://fangyibai.github.io"/>
    <link rel="self" href="https://fangyibai.github.io/atom.xml"/>
    <subtitle>æ—¥ç›ŠåŠªåŠ›è€Œåé£ç”Ÿæ°´èµ·</subtitle>
    <logo>https://fangyibai.github.io/images/avatar.png</logo>
    <icon>https://fangyibai.github.io/favicon.ico</icon>
    <rights>All rights reserved 2020, æ–¹ä¹™ç™¾Notes</rights>
    <entry>
        <title type="html"><![CDATA[vagrantæ­å»ºå¼€å‘ç¯å¢ƒ]]></title>
        <id>https://fangyibai.github.io/post/vagrant-dev-env/</id>
        <link href="https://fangyibai.github.io/post/vagrant-dev-env/">
        </link>
        <updated>2020-03-21T16:13:03.000Z</updated>
        <content type="html"><![CDATA[<h3 id="vagrantä»‹ç»">vagrantä»‹ç»</h3>
<blockquote>
<p>Vagrantæ˜¯ä¸€æ¬¾ç”¨äºæ„å»ºåŠé…ç½®è™šæ‹Ÿå¼€å‘ç¯å¢ƒçš„è½¯ä»¶ï¼ŒåŸºäºRuby,ä¸»è¦ä»¥å‘½ä»¤è¡Œçš„æ–¹å¼è¿è¡Œã€‚ä¸»è¦ä½¿ç”¨Oracleçš„å¼€æºVirtualBoxè™šæ‹ŸåŒ–ç³»ç»Ÿï¼Œä¸Chefï¼ŒSaltï¼ŒPuppetç­‰ç¯å¢ƒé…ç½®ç®¡ç†è½¯ä»¶æ­é…ä½¿ç”¨ï¼Œ å¯ä»¥å®è¡Œå¿«é€Ÿè™šæ‹Ÿå¼€å‘ç¯å¢ƒçš„æ„å»ºã€‚</p>
</blockquote>
<p>Vagrantç›®å‰æ˜¯å›½å†…äº’è”ç½‘å…¬å¸åº”ç”¨æœ€å¤šçš„å†…éƒ¨å¼€å‘ç¯å¢ƒå·¥å…·ã€‚Vagrantæ˜¯æˆ‘ä»¬å¼€å‘è€…çš„ç¦éŸ³ï¼Œä½¿æˆ‘ä»¬å®Œå…¨æ‘†è„±äº†é‡å¤é…ç½®ç¯å¢ƒçš„å¤„å¢ƒã€‚Vagrantç®€å•çš„é…ç½®ï¼Œä¸°å¯Œçš„è‡ªåŠ¨åŒ–è„šæœ¬èµ„æºä»¥åŠåˆ†äº«çš„ä¾¿æ·æ€§éƒ½æ˜¯æˆ‘ä»¬åº”è¯¥å­¦ä¹ çš„æ€æƒ³ï¼ŒèŠ‚çœå¼€å‘äººå‘˜çš„å¤§é‡å‡†å¤‡å·¥ä½œæ—¶é—´,ä½¿å¼€å‘äººå‘˜æ›´ä¸“æ³¨å…¬å¸ä¸šåŠ¡å¼€å‘ã€‚</p>
<h3 id="å®‰è£…æ–‡æ¡£">å®‰è£…æ–‡æ¡£</h3>
<p>ä½¿ç”¨ VirtualBox æ¥æ­å»ºè™šæ‹Ÿæœºï¼Œä¸»è¦æ˜¯å…è´¹ã€‚</p>
<p>Vagrant ä¹Ÿæ”¯æŒ VMwareï¼Œä¸è¿‡ VMware æ˜¯æ”¶è´¹çš„ï¼Œå¯¹åº”çš„ Vagrant ç‰ˆæœ¬ä¹Ÿæ˜¯æ”¶è´¹çš„ã€‚</p>
<h4 id="å®‰è£…virtualbox">å®‰è£…VirtualBox</h4>
<p>å®˜æ–¹ä¸‹è½½åœ°å€ï¼šhttps://www.virtualbox.org/wiki/Downloads</p>
<h4 id="å®‰è£…-vagrant">å®‰è£… Vagrant</h4>
<p>å®˜æ–¹ä¸‹è½½åœ°å€ï¼šhttps://www.vagrantup.com/downloads.html</p>
<p>å®Œæˆåä½¿ç”¨å‘½ä»¤ <code>vagrant --help</code> ä¼šæç¤ºvagrantæ”¯æŒçš„å‘½ä»¤å’Œå‚æ•°</p>
<h3 id="åˆ›å»ºä¸€ä¸ªcentos7">åˆ›å»ºä¸€ä¸ªcentos7</h3>
<p><code>vagrant init centos/7</code> åˆå§‹åŒ–è™šæ‹Ÿæœºï¼Œä¼šç”Ÿæˆä¸€ä¸ªVagrantfileæ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶æè¿°äº†è¦åˆ›å»ºä»€ä¹ˆæ ·çš„è™šæ‹Ÿæœºã€‚</p>
<p><code>vagrant up</code> å¯åŠ¨è™šæ‹Ÿæœºï¼Œå¦‚æœæœ¬åœ°å·²ç»æœ‰boxæ–‡ä»¶ä¼šç›´æ¥åŠ è½½ï¼Œå¦‚æœä¸å­˜åœ¨ä¼šè‡ªåŠ¨æ‹‰å–ã€‚</p>
<p>åœ¨å½“å‰ç›®å½•è¿è¡Œ<code>vagrant ssh</code>ä¼šè¿›å…¥åˆ°centosé‡Œå»ã€‚</p>
<p>vagrantæœ‰ä¸€ä¸ªç½‘ç«™<a href="https://app.vagrantup.com/">VagrantCloud</a>æƒ³è¦åˆ›å»ºå…¶å®ƒè™šæ‹Ÿæœºï¼Œå¯ä»¥åœ¨<a href="https://app.vagrantup.com/">VagrantCloud</a>æœç´¢æƒ³è¦çš„Vagrantfileã€‚</p>
<p>æ¯”å¦‚æƒ³è¦ä¸€ä¸ªubuntuçš„ç³»ç»Ÿï¼Œç›´æ¥è´´åˆ°Vagrantfileé‡Œå³å¯ä½¿ç”¨äº†ã€‚</p>
<pre><code>Vagrant.configure(&quot;2&quot;) do |config|
  config.vm.box = &quot;ubuntu/trusty64&quot;
end
</code></pre>
<h3 id="vagrantfileæ–‡ä»¶æè¿°">Vagrantfileæ–‡ä»¶æè¿°</h3>
<pre><code>#ç«¯å£æ˜ å°„ï¼šå°†guestè™šæ‹Ÿæœºçš„ç«¯å£æ˜ å°„åˆ°hostç‰©ç†æœºçš„ç«¯å£
config.vm.network &quot;forwarded_port&quot;, guest: 80, host: 8080
#è®¾ç½®ç§æœ‰ç½‘ç»œ,åªæœ‰ç‰©ç†æœºèƒ½è¿›è¡Œé€šä¿¡
config.vm.network &quot;private_network&quot;, ip: &quot;192.168.33.10&quot;
#è®¾ç½®å…¬å…±ç½‘ç»œ
# config.vm.network &quot;public_network&quot;
#å…±äº«æ–‡ä»¶å¤¹
config.vm.synced_folder &quot;../data&quot;, &quot;/vagrant_data&quot;
#å¯åŠ¨åæ‰§è¡Œshellå‘½ä»¤
config.vm.provision &quot;shell&quot;, inline: &lt;&lt;-SHELL
  apt-get update
  apt-get install -y apache2
SHELL
</code></pre>
<h3 id="ä½¿ç”¨vagrantfileåˆ›å»ºå¤æ‚ç¯å¢ƒ">ä½¿ç”¨Vagrantfileåˆ›å»ºå¤æ‚ç¯å¢ƒ</h3>
<p>åˆ›å»º3å°å¸¦dockerç¯å¢ƒçš„è™šæ‹Ÿæœºï¼Œç›¸äº’ä¹‹é—´å¯è¿›è¡Œé€šä¿¡ã€‚</p>
<ul>
<li>Vagrantfileé…ç½®</li>
</ul>
<pre><code># -*- mode: ruby -*-
# vi: set ft=ruby :

Vagrant.require_version &quot;&gt;= 1.6.0&quot;

boxes = [
    {
        :name =&gt; &quot;swarm-manager&quot;,
        :eth1 =&gt; &quot;192.168.205.10&quot;,
        :mem =&gt; &quot;1024&quot;,
        :cpu =&gt; &quot;1&quot;
    },
    {
        :name =&gt; &quot;swarm-worker1&quot;,
        :eth1 =&gt; &quot;192.168.205.11&quot;,
        :mem =&gt; &quot;1024&quot;,
        :cpu =&gt; &quot;1&quot;
    },
    {
        :name =&gt; &quot;swarm-worker2&quot;,
        :eth1 =&gt; &quot;192.168.205.12&quot;,
        :mem =&gt; &quot;1024&quot;,
        :cpu =&gt; &quot;1&quot;
    }
]

Vagrant.configure(2) do |config|

  config.vm.box = &quot;centos7_docker_swarm&quot;

  boxes.each do |opts|
      config.vm.define opts[:name] do |config|
        config.vm.hostname = opts[:name]
        config.vm.provider &quot;vmware_fusion&quot; do |v|
          v.vmx[&quot;memsize&quot;] = opts[:mem]
          v.vmx[&quot;numvcpus&quot;] = opts[:cpu]
        end

        config.vm.provider &quot;virtualbox&quot; do |v|
          v.customize [&quot;modifyvm&quot;, :id, &quot;--memory&quot;, opts[:mem]]
          v.customize [&quot;modifyvm&quot;, :id, &quot;--cpus&quot;, opts[:cpu]]
        end

        config.vm.network :private_network, ip: opts[:eth1]
      end
  end
  
  config.vm.provision &quot;shell&quot;, privileged: true, path: &quot;./setup.sh&quot;

end

</code></pre>
<ul>
<li>setup.sh</li>
</ul>
<pre><code class="language-shell">#/bin/sh

# install some tools
sudo yum install -y git vim gcc glibc-static telnet bridge-utils

# install docker
curl -fsSL get.docker.com -o get-docker.sh
sh get-docker.sh

# start docker service
sudo groupadd docker
sudo gpasswd -a vagrant docker
sudo systemctl start docker

rm -rf get-docker.sh

</code></pre>
<h3 id="ç¯å¢ƒæ‰“åŒ…">ç¯å¢ƒæ‰“åŒ…</h3>
<p><code>vagrant package</code>å‘½ä»¤æ‰“åŒ…å®Œæˆåä¼šåœ¨å½“å‰ç›®å½•ç”Ÿæˆä¸€ä¸ª <code>package.box</code> çš„æ–‡ä»¶ï¼Œå°†è¿™ä¸ªæ–‡ä»¶ä¼ ç»™å…¶ä»–ç”¨æˆ·ï¼Œå…¶ä»–ç”¨æˆ·åªè¦æ·»åŠ è¿™ä¸ª box å¹¶ç”¨å…¶åˆå§‹åŒ–è‡ªå·±çš„å¼€å‘ç›®å½•å°±èƒ½å¾—åˆ°ä¸€ä¸ªä¸€æ¨¡ä¸€æ ·çš„å¼€å‘ç¯å¢ƒäº†ã€‚</p>
<p>ä½¿ç”¨<code>vagrant package --help</code>æŸ¥çœ‹å…¶å®ƒå‚æ•°ç”¨æ³•</p>
<pre><code>    --base NAME                  Name of a VM in VirtualBox to package as a base box (VirtualBox Only)
    --output NAME                Name of the file to output
    --include FILE,FILE..        Comma separated additional files to package with the box
    --vagrantfile FILE           Vagrantfile to package with the box
-h, --help                       Print this help
</code></pre>
<p>æ³¨æ„æ‰“åŒ…éœ€é€€å‡ºå¹¶å…³é—­è™šæ‹Ÿæœºã€‚</p>
<h3 id="å¸¸ç”¨å‘½ä»¤">å¸¸ç”¨å‘½ä»¤</h3>
<h4 id="boxç®¡ç†å‘½ä»¤">boxç®¡ç†å‘½ä»¤</h4>
<table>
<thead>
<tr>
<th style="text-align:left">å‘½ä»¤</th>
<th style="text-align:left">æ³¨é‡Š</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">vagrant box list</td>
<td style="text-align:left">æŸ¥çœ‹æœ¬åœ°boxåˆ—è¡¨</td>
</tr>
<tr>
<td style="text-align:left">vagrant box add</td>
<td style="text-align:left">æ·»åŠ boxåˆ°åˆ—è¡¨</td>
</tr>
<tr>
<td style="text-align:left">vagrant box remove</td>
<td style="text-align:left">ä»boxåˆ—è¡¨ç§»é™¤</td>
</tr>
</tbody>
</table>
<h4 id="vagrantå‘½ä»¤">vagrantå‘½ä»¤</h4>
<table>
<thead>
<tr>
<th style="text-align:left">å‘½ä»¤</th>
<th style="text-align:left">æ³¨é‡Š</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">vagrant init</td>
<td style="text-align:left">åˆå§‹åŒ–</td>
</tr>
<tr>
<td style="text-align:left">vagrant up</td>
<td style="text-align:left">å¯åŠ¨è™šæ‹Ÿæœº</td>
</tr>
<tr>
<td style="text-align:left">vagrant halt</td>
<td style="text-align:left">å…³é—­è™šæ‹Ÿæœº</td>
</tr>
<tr>
<td style="text-align:left">vagrant reload</td>
<td style="text-align:left">é‡å¯è™šæ‹Ÿæœº</td>
</tr>
<tr>
<td style="text-align:left">vagrant ssh</td>
<td style="text-align:left">SSHè¿›å…¥è™šæ‹Ÿæœº</td>
</tr>
<tr>
<td style="text-align:left">vagrant suspend</td>
<td style="text-align:left">æŒ‚èµ·è™šæ‹Ÿæœº</td>
</tr>
<tr>
<td style="text-align:left">vagrant resume</td>
<td style="text-align:left">å”¤é†’è™šæ‹Ÿæœº</td>
</tr>
<tr>
<td style="text-align:left">vagrant status</td>
<td style="text-align:left">æŸ¥çœ‹è™šæ‹Ÿæœºè¿è¡ŒçŠ¶æ€</td>
</tr>
<tr>
<td style="text-align:left">vagrant destroy</td>
<td style="text-align:left">é”€æ¯å½“å‰è™šæ‹Ÿæœº</td>
</tr>
</tbody>
</table>
<h3 id="å¸¸è§é—®é¢˜">å¸¸è§é—®é¢˜</h3>
<ol>
<li>
<p>åœ¨å®‰è£…ä¸€äº›è½¯ä»¶æ—¶éœ€è¦ç¡®è®¤å¯†ç ï¼Œé»˜è®¤è´¦å·/å¯†ç æ˜¯<code>vagrant/vagrant</code>ï¼Œrootè´¦å·/å¯†ç ï¼š<code>root/vagrant</code></p>
</li>
<li>
<p>è‡ªåŠ¨ä¸‹è½½æ‹‰å–é•œåƒå¤ªæ…¢ï¼Œå»ºè®®æ‰‹åŠ¨ä¸‹è½½é•œåƒã€‚</p>
<pre><code>vagrant box add {title} {url}
vagrant init {title}
vagrant up
</code></pre>
</li>
<li>
<p>æ­¤æ–‡æ‰€ç”¨ç‰ˆæœ¬</p>
<ul>
<li>
<blockquote>
<p>VirtualBox 6.1.4</p>
</blockquote>
</li>
<li>
<blockquote>
<p>vagrant 2.2.7</p>
</blockquote>
</li>
<li>
<blockquote>
<p>iTrem2  3.2.0</p>
</blockquote>
</li>
</ul>
</li>
</ol>
<h3 id="æ‰©å±•èµ„æ–™">æ‰©å±•èµ„æ–™</h3>
<p>å®˜ç½‘æ–‡æ¡£ï¼š</p>
<blockquote>
<p>vagrantï¼šhttps://www.vagrantup.com/docs/</p>
</blockquote>
<blockquote>
<p>Vagrantfileï¼šhttps://www.vagrantup.com/docs/vagrantfile/</p>
</blockquote>
<blockquote>
<p>é•œåƒæœç´¢ï¼šhttps://app.vagrantup.com/boxes/search</p>
</blockquote>
<br/>
<br/>
<br/>
<blockquote>
<p>æœ¬æ–‡æ ‡é¢˜ï¼š vagrantæ­å»ºå¼€å‘ç¯å¢ƒ<br>
æœ¬æ–‡ä½œè€…ï¼š æ–¹ä¹™ç™¾<br>
æœ¬æ–‡é“¾æ¥ï¼š https://fangyibai.github.io/post/vagrant-dev-env/<br>
ç‰ˆæƒå£°æ˜ï¼š æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·ä¿ç•™åŸæ–‡é“¾æ¥åŠä½œè€…ï¼</p>
</blockquote>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Hello Gridea]]></title>
        <id>https://fangyibai.github.io/post/hello-gridea/</id>
        <link href="https://fangyibai.github.io/post/hello-gridea/">
        </link>
        <updated>2018-12-11T16:00:00.000Z</updated>
        <summary type="html"><![CDATA[<p>ğŸ‘  æ¬¢è¿ä½¿ç”¨ <strong>Gridea</strong> ï¼<br>
âœï¸  <strong>Gridea</strong> ä¸€ä¸ªé™æ€åšå®¢å†™ä½œå®¢æˆ·ç«¯ã€‚ä½ å¯ä»¥ç”¨å®ƒæ¥è®°å½•ä½ çš„ç”Ÿæ´»ã€å¿ƒæƒ…ã€çŸ¥è¯†ã€ç¬”è®°ã€åˆ›æ„... ...</p>
]]></summary>
        <content type="html"><![CDATA[<p>ğŸ‘  æ¬¢è¿ä½¿ç”¨ <strong>Gridea</strong> ï¼<br>
âœï¸  <strong>Gridea</strong> ä¸€ä¸ªé™æ€åšå®¢å†™ä½œå®¢æˆ·ç«¯ã€‚ä½ å¯ä»¥ç”¨å®ƒæ¥è®°å½•ä½ çš„ç”Ÿæ´»ã€å¿ƒæƒ…ã€çŸ¥è¯†ã€ç¬”è®°ã€åˆ›æ„... ...</p>
<!-- more -->
<p><a href="https://github.com/getgridea/gridea">Github</a><br>
<a href="https://gridea.dev/">Gridea ä¸»é¡µ</a><br>
<a href="http://fehey.com/">ç¤ºä¾‹ç½‘ç«™</a></p>
<h2 id="ç‰¹æ€§">ç‰¹æ€§ğŸ‘‡</h2>
<p>ğŸ“  ä½ å¯ä»¥ä½¿ç”¨æœ€é…·çš„ <strong>Markdown</strong> è¯­æ³•ï¼Œè¿›è¡Œå¿«é€Ÿåˆ›ä½œ</p>
<p>ğŸŒ‰  ä½ å¯ä»¥ç»™æ–‡ç« é…ä¸Šç²¾ç¾çš„å°é¢å›¾å’Œåœ¨æ–‡ç« ä»»æ„ä½ç½®æ’å…¥å›¾ç‰‡</p>
<p>ğŸ·ï¸  ä½ å¯ä»¥å¯¹æ–‡ç« è¿›è¡Œæ ‡ç­¾åˆ†ç»„</p>
<p>ğŸ“‹  ä½ å¯ä»¥è‡ªå®šä¹‰èœå•ï¼Œç”šè‡³å¯ä»¥åˆ›å»ºå¤–éƒ¨é“¾æ¥èœå•</p>
<p>ğŸ’»  ä½ å¯ä»¥åœ¨ <strong>Windows</strong>ï¼Œ<strong>MacOS</strong> æˆ– <strong>Linux</strong> è®¾å¤‡ä¸Šä½¿ç”¨æ­¤å®¢æˆ·ç«¯</p>
<p>ğŸŒ  ä½ å¯ä»¥ä½¿ç”¨ <strong>ğ–¦ğ—‚ğ—ğ—ğ—ğ–» ğ–¯ğ–ºğ—€ğ–¾ğ—Œ</strong> æˆ– <strong>Coding Pages</strong> å‘ä¸–ç•Œå±•ç¤ºï¼Œæœªæ¥å°†æ”¯æŒæ›´å¤šå¹³å°</p>
<p>ğŸ’¬  ä½ å¯ä»¥è¿›è¡Œç®€å•çš„é…ç½®ï¼Œæ¥å…¥ <a href="https://github.com/gitalk/gitalk">Gitalk</a> æˆ– <a href="https://github.com/SukkaW/DisqusJS">DisqusJS</a> è¯„è®ºç³»ç»Ÿ</p>
<p>ğŸ‡¬ğŸ‡§  ä½ å¯ä»¥ä½¿ç”¨<strong>ä¸­æ–‡ç®€ä½“</strong>æˆ–<strong>è‹±è¯­</strong></p>
<p>ğŸŒ  ä½ å¯ä»¥ä»»æ„ä½¿ç”¨åº”ç”¨å†…é»˜è®¤ä¸»é¢˜æˆ–ä»»æ„ç¬¬ä¸‰æ–¹ä¸»é¢˜ï¼Œå¼ºå¤§çš„ä¸»é¢˜è‡ªå®šä¹‰èƒ½åŠ›</p>
<p>ğŸ–¥  ä½ å¯ä»¥è‡ªå®šä¹‰æºæ–‡ä»¶å¤¹ï¼Œåˆ©ç”¨ OneDriveã€ç™¾åº¦ç½‘ç›˜ã€iCloudã€Dropbox ç­‰è¿›è¡Œå¤šè®¾å¤‡åŒæ­¥</p>
<p>ğŸŒ± å½“ç„¶ <strong>Gridea</strong> è¿˜å¾ˆå¹´è½»ï¼Œæœ‰å¾ˆå¤šä¸è¶³ï¼Œä½†è¯·ç›¸ä¿¡ï¼Œå®ƒä¼šä¸åœå‘å‰ ğŸƒ</p>
<p>æœªæ¥ï¼Œå®ƒä¸€å®šä¼šæˆä¸ºä½ ç¦»ä¸å¼€çš„ä¼™ä¼´</p>
<p>å°½æƒ…å‘æŒ¥ä½ çš„æ‰åå§ï¼</p>
<p>ğŸ˜˜ Enjoy~</p>
]]></content>
    </entry>
</feed>