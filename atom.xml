<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://fangyibai.github.io</id>
    <title>方乙百Notes</title>
    <updated>2020-03-21T16:53:36.103Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://fangyibai.github.io"/>
    <link rel="self" href="https://fangyibai.github.io/atom.xml"/>
    <subtitle>日益努力而后风生水起</subtitle>
    <logo>https://fangyibai.github.io/images/avatar.png</logo>
    <icon>https://fangyibai.github.io/favicon.ico</icon>
    <rights>All rights reserved 2020, 方乙百Notes</rights>
    <entry>
        <title type="html"><![CDATA[vagrant搭建开发环境]]></title>
        <id>https://fangyibai.github.io/post/vagrant-dev-env/</id>
        <link href="https://fangyibai.github.io/post/vagrant-dev-env/">
        </link>
        <updated>2020-03-21T16:13:03.000Z</updated>
        <content type="html"><![CDATA[<h3 id="vagrant介绍">vagrant介绍</h3>
<blockquote>
<p>Vagrant是一款用于构建及配置虚拟开发环境的软件，基于Ruby,主要以命令行的方式运行。主要使用Oracle的开源VirtualBox虚拟化系统，与Chef，Salt，Puppet等环境配置管理软件搭配使用， 可以实行快速虚拟开发环境的构建。</p>
</blockquote>
<p>Vagrant目前是国内互联网公司应用最多的内部开发环境工具。Vagrant是我们开发者的福音，使我们完全摆脱了重复配置环境的处境。Vagrant简单的配置，丰富的自动化脚本资源以及分享的便捷性都是我们应该学习的思想，节省开发人员的大量准备工作时间,使开发人员更专注公司业务开发。</p>
<h3 id="安装文档">安装文档</h3>
<p>使用 VirtualBox 来搭建虚拟机，主要是免费。</p>
<p>Vagrant 也支持 VMware，不过 VMware 是收费的，对应的 Vagrant 版本也是收费的。</p>
<h4 id="安装virtualbox">安装VirtualBox</h4>
<p>官方下载地址：https://www.virtualbox.org/wiki/Downloads</p>
<h4 id="安装-vagrant">安装 Vagrant</h4>
<p>官方下载地址：https://www.vagrantup.com/downloads.html</p>
<p>完成后使用命令 <code>vagrant --help</code> 会提示vagrant支持的命令和参数</p>
<h3 id="创建一个centos7">创建一个centos7</h3>
<p><code>vagrant init centos/7</code> 初始化虚拟机，会生成一个Vagrantfile文件，这个文件描述了要创建什么样的虚拟机。</p>
<p><code>vagrant up</code> 启动虚拟机，如果本地已经有box文件会直接加载，如果不存在会自动拉取。</p>
<p>在当前目录运行<code>vagrant ssh</code>会进入到centos里去。</p>
<p>vagrant有一个网站<a href="https://app.vagrantup.com/">VagrantCloud</a>想要创建其它虚拟机，可以在<a href="https://app.vagrantup.com/">VagrantCloud</a>搜索想要的Vagrantfile。</p>
<p>比如想要一个ubuntu的系统，直接贴到Vagrantfile里即可使用了。</p>
<pre><code>Vagrant.configure(&quot;2&quot;) do |config|
  config.vm.box = &quot;ubuntu/trusty64&quot;
end
</code></pre>
<h3 id="vagrantfile文件描述">Vagrantfile文件描述</h3>
<pre><code>#端口映射：将guest虚拟机的端口映射到host物理机的端口
config.vm.network &quot;forwarded_port&quot;, guest: 80, host: 8080
#设置私有网络,只有物理机能进行通信
config.vm.network &quot;private_network&quot;, ip: &quot;192.168.33.10&quot;
#设置公共网络
# config.vm.network &quot;public_network&quot;
#共享文件夹
config.vm.synced_folder &quot;../data&quot;, &quot;/vagrant_data&quot;
#启动后执行shell命令
config.vm.provision &quot;shell&quot;, inline: &lt;&lt;-SHELL
  apt-get update
  apt-get install -y apache2
SHELL
</code></pre>
<h3 id="使用vagrantfile创建复杂环境">使用Vagrantfile创建复杂环境</h3>
<p>创建3台带docker环境的虚拟机，相互之间可进行通信。</p>
<ul>
<li>Vagrantfile配置</li>
</ul>
<pre><code># -*- mode: ruby -*-
# vi: set ft=ruby :

Vagrant.require_version &quot;&gt;= 1.6.0&quot;

boxes = [
    {
        :name =&gt; &quot;swarm-manager&quot;,
        :eth1 =&gt; &quot;192.168.205.10&quot;,
        :mem =&gt; &quot;1024&quot;,
        :cpu =&gt; &quot;1&quot;
    },
    {
        :name =&gt; &quot;swarm-worker1&quot;,
        :eth1 =&gt; &quot;192.168.205.11&quot;,
        :mem =&gt; &quot;1024&quot;,
        :cpu =&gt; &quot;1&quot;
    },
    {
        :name =&gt; &quot;swarm-worker2&quot;,
        :eth1 =&gt; &quot;192.168.205.12&quot;,
        :mem =&gt; &quot;1024&quot;,
        :cpu =&gt; &quot;1&quot;
    }
]

Vagrant.configure(2) do |config|

  config.vm.box = &quot;centos7_docker_swarm&quot;

  boxes.each do |opts|
      config.vm.define opts[:name] do |config|
        config.vm.hostname = opts[:name]
        config.vm.provider &quot;vmware_fusion&quot; do |v|
          v.vmx[&quot;memsize&quot;] = opts[:mem]
          v.vmx[&quot;numvcpus&quot;] = opts[:cpu]
        end

        config.vm.provider &quot;virtualbox&quot; do |v|
          v.customize [&quot;modifyvm&quot;, :id, &quot;--memory&quot;, opts[:mem]]
          v.customize [&quot;modifyvm&quot;, :id, &quot;--cpus&quot;, opts[:cpu]]
        end

        config.vm.network :private_network, ip: opts[:eth1]
      end
  end
  
  config.vm.provision &quot;shell&quot;, privileged: true, path: &quot;./setup.sh&quot;

end

</code></pre>
<ul>
<li>setup.sh</li>
</ul>
<pre><code class="language-shell">#/bin/sh

# install some tools
sudo yum install -y git vim gcc glibc-static telnet bridge-utils

# install docker
curl -fsSL get.docker.com -o get-docker.sh
sh get-docker.sh

# start docker service
sudo groupadd docker
sudo gpasswd -a vagrant docker
sudo systemctl start docker

rm -rf get-docker.sh

</code></pre>
<h3 id="环境打包">环境打包</h3>
<p><code>vagrant package</code>命令打包完成后会在当前目录生成一个 <code>package.box</code> 的文件，将这个文件传给其他用户，其他用户只要添加这个 box 并用其初始化自己的开发目录就能得到一个一模一样的开发环境了。</p>
<p>使用<code>vagrant package --help</code>查看其它参数用法</p>
<pre><code>    --base NAME                  Name of a VM in VirtualBox to package as a base box (VirtualBox Only)
    --output NAME                Name of the file to output
    --include FILE,FILE..        Comma separated additional files to package with the box
    --vagrantfile FILE           Vagrantfile to package with the box
-h, --help                       Print this help
</code></pre>
<p>注意打包需退出并关闭虚拟机。</p>
<h3 id="常用命令">常用命令</h3>
<h4 id="box管理命令">box管理命令</h4>
<table>
<thead>
<tr>
<th style="text-align:left">命令</th>
<th style="text-align:left">注释</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">vagrant box list</td>
<td style="text-align:left">查看本地box列表</td>
</tr>
<tr>
<td style="text-align:left">vagrant box add</td>
<td style="text-align:left">添加box到列表</td>
</tr>
<tr>
<td style="text-align:left">vagrant box remove</td>
<td style="text-align:left">从box列表移除</td>
</tr>
</tbody>
</table>
<h4 id="vagrant命令">vagrant命令</h4>
<table>
<thead>
<tr>
<th style="text-align:left">命令</th>
<th style="text-align:left">注释</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">vagrant init</td>
<td style="text-align:left">初始化</td>
</tr>
<tr>
<td style="text-align:left">vagrant up</td>
<td style="text-align:left">启动虚拟机</td>
</tr>
<tr>
<td style="text-align:left">vagrant halt</td>
<td style="text-align:left">关闭虚拟机</td>
</tr>
<tr>
<td style="text-align:left">vagrant reload</td>
<td style="text-align:left">重启虚拟机</td>
</tr>
<tr>
<td style="text-align:left">vagrant ssh</td>
<td style="text-align:left">SSH进入虚拟机</td>
</tr>
<tr>
<td style="text-align:left">vagrant suspend</td>
<td style="text-align:left">挂起虚拟机</td>
</tr>
<tr>
<td style="text-align:left">vagrant resume</td>
<td style="text-align:left">唤醒虚拟机</td>
</tr>
<tr>
<td style="text-align:left">vagrant status</td>
<td style="text-align:left">查看虚拟机运行状态</td>
</tr>
<tr>
<td style="text-align:left">vagrant destroy</td>
<td style="text-align:left">销毁当前虚拟机</td>
</tr>
</tbody>
</table>
<h3 id="常见问题">常见问题</h3>
<ol>
<li>
<p>在安装一些软件时需要确认密码，默认账号/密码是<code>vagrant/vagrant</code>，root账号/密码：<code>root/vagrant</code></p>
</li>
<li>
<p>自动下载拉取镜像太慢，建议手动下载镜像。</p>
<pre><code>vagrant box add {title} {url}
vagrant init {title}
vagrant up
</code></pre>
</li>
<li>
<p>此文所用版本</p>
<ul>
<li>
<blockquote>
<p>VirtualBox 6.1.4</p>
</blockquote>
</li>
<li>
<blockquote>
<p>vagrant 2.2.7</p>
</blockquote>
</li>
<li>
<blockquote>
<p>iTrem2  3.2.0</p>
</blockquote>
</li>
</ul>
</li>
</ol>
<h3 id="扩展资料">扩展资料</h3>
<p>官网文档：</p>
<blockquote>
<p>vagrant：https://www.vagrantup.com/docs/</p>
</blockquote>
<blockquote>
<p>Vagrantfile：https://www.vagrantup.com/docs/vagrantfile/</p>
</blockquote>
<blockquote>
<p>镜像搜索：https://app.vagrantup.com/boxes/search</p>
</blockquote>
<br/>
<br/>
<br/>
<blockquote>
<p>本文标题： vagrant搭建开发环境<br>
本文作者： 方乙百<br>
本文链接： https://fangyibai.github.io/post/vagrant-dev-env/<br>
版权声明： 本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议。转载请保留原文链接及作者！</p>
</blockquote>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Hello Gridea]]></title>
        <id>https://fangyibai.github.io/post/hello-gridea/</id>
        <link href="https://fangyibai.github.io/post/hello-gridea/">
        </link>
        <updated>2018-12-11T16:00:00.000Z</updated>
        <summary type="html"><![CDATA[<p>👏  欢迎使用 <strong>Gridea</strong> ！<br>
✍️  <strong>Gridea</strong> 一个静态博客写作客户端。你可以用它来记录你的生活、心情、知识、笔记、创意... ...</p>
]]></summary>
        <content type="html"><![CDATA[<p>👏  欢迎使用 <strong>Gridea</strong> ！<br>
✍️  <strong>Gridea</strong> 一个静态博客写作客户端。你可以用它来记录你的生活、心情、知识、笔记、创意... ...</p>
<!-- more -->
<p><a href="https://github.com/getgridea/gridea">Github</a><br>
<a href="https://gridea.dev/">Gridea 主页</a><br>
<a href="http://fehey.com/">示例网站</a></p>
<h2 id="特性">特性👇</h2>
<p>📝  你可以使用最酷的 <strong>Markdown</strong> 语法，进行快速创作</p>
<p>🌉  你可以给文章配上精美的封面图和在文章任意位置插入图片</p>
<p>🏷️  你可以对文章进行标签分组</p>
<p>📋  你可以自定义菜单，甚至可以创建外部链接菜单</p>
<p>💻  你可以在 <strong>Windows</strong>，<strong>MacOS</strong> 或 <strong>Linux</strong> 设备上使用此客户端</p>
<p>🌎  你可以使用 <strong>𝖦𝗂𝗍𝗁𝗎𝖻 𝖯𝖺𝗀𝖾𝗌</strong> 或 <strong>Coding Pages</strong> 向世界展示，未来将支持更多平台</p>
<p>💬  你可以进行简单的配置，接入 <a href="https://github.com/gitalk/gitalk">Gitalk</a> 或 <a href="https://github.com/SukkaW/DisqusJS">DisqusJS</a> 评论系统</p>
<p>🇬🇧  你可以使用<strong>中文简体</strong>或<strong>英语</strong></p>
<p>🌁  你可以任意使用应用内默认主题或任意第三方主题，强大的主题自定义能力</p>
<p>🖥  你可以自定义源文件夹，利用 OneDrive、百度网盘、iCloud、Dropbox 等进行多设备同步</p>
<p>🌱 当然 <strong>Gridea</strong> 还很年轻，有很多不足，但请相信，它会不停向前 🏃</p>
<p>未来，它一定会成为你离不开的伙伴</p>
<p>尽情发挥你的才华吧！</p>
<p>😘 Enjoy~</p>
]]></content>
    </entry>
</feed>