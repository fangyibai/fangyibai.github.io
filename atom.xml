<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://fangyibai.github.io</id>
    <title>æ–¹ä¹™ç™¾Notes</title>
    <updated>2020-03-29T15:33:32.178Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://fangyibai.github.io"/>
    <link rel="self" href="https://fangyibai.github.io/atom.xml"/>
    <subtitle>æ—¥ç›ŠåŠªåŠ›è€Œåé£ç”Ÿæ°´èµ·</subtitle>
    <logo>https://fangyibai.github.io/images/avatar.png</logo>
    <icon>https://fangyibai.github.io/favicon.ico</icon>
    <rights>All rights reserved 2020, æ–¹ä¹™ç™¾Notes</rights>
    <entry>
        <title type="html"><![CDATA[Dockerfileè¯­æ³•æ¢³ç†]]></title>
        <id>https://fangyibai.github.io/post/dockerfile-clear-up/</id>
        <link href="https://fangyibai.github.io/post/dockerfile-clear-up/">
        </link>
        <updated>2020-03-29T15:19:58.000Z</updated>
        <content type="html"><![CDATA[<h1 id="dockerfileè¯­æ³•æ¢³ç†">Dockerfileè¯­æ³•æ¢³ç†</h1>
<h2 id="è¯­æ³•æ¢³ç†">è¯­æ³•æ¢³ç†</h2>
<h3 id="from">FROM</h3>
<pre><code>FROM [--platform=&lt;platform&gt;] &lt;image&gt; [AS &lt;name&gt;]

FROM [--platform=&lt;platform&gt;] &lt;image&gt;[:&lt;tag&gt;] [AS &lt;name&gt;]

FROM [--platform=&lt;platform&gt;] &lt;image&gt;[@&lt;digest&gt;] [AS &lt;name&gt;]
</code></pre>
<ol>
<li>FROMæ˜¯æ„å»ºimageçš„åŸºç¡€ï¼Œä¸€ä¸ªæœ‰æ•ˆçš„Dockerfileå¿…é¡»ä»ä¸€ä¸ªFROMæŒ‡ä»¤å¼€å§‹ã€‚</li>
<li>ä¸ºäº†å®‰å…¨ï¼Œå°½é‡ä½¿ç”¨å®˜æ–¹çš„imageä½œä¸ºbase imageã€‚</li>
</ol>
<h3 id="label">LABEL</h3>
<pre><code># Set one or more individual labels
LABEL com.example.version=&quot;0.0.1-beta&quot;
LABEL vendor1=&quot;ACME Incorporated&quot;
LABEL vendor2=ZENITH\ Incorporated
LABEL com.example.release-date=&quot;2015-02-12&quot;
LABEL com.example.version.is-production=&quot;&quot;
</code></pre>
<p>ç”¨äºå®šä¹‰imageçš„metadataï¼ˆç±»ä¼¼äºä»£ç ä¸­çš„æ³¨é‡Šï¼‰ã€‚</p>
<ol>
<li>æ ‡ç­¾æ˜¯ä¸€ä¸ªé”®å€¼å¯¹ï¼Œä»¥å­—ç¬¦ä¸²çš„å½¢å¼å­˜å‚¨ã€‚</li>
<li>å¯ä»¥ä¸ºä¸€ä¸ªå¯¹è±¡æŒ‡å®šå¤šä¸ªæ ‡ç­¾ï¼Œä½†æ˜¯æ¯ä¸ªé”®å€¼å¯¹åœ¨ä¸€ä¸ªå¯¹è±¡ä¸­å¿…é¡»æ˜¯å”¯ä¸€çš„ã€‚</li>
<li>å¦‚æœç›¸åŒçš„é”®æœ‰å¤šä¸ªå€¼ï¼Œåˆ™æœ€è¿‘å†™å…¥çš„å€¼å°†è¦†ç›–æ‰€æœ‰ä»¥å‰çš„å€¼ã€‚</li>
<li>å°½é‡åˆå¹¶åˆ°ä¸€ä¸ªæ ‡ç­¾é‡Œ</li>
</ol>
<pre><code># Set multiple labels on one line
LABEL com.example.version=&quot;0.0.1-beta&quot; com.example.release-date=&quot;2015-02-12&quot;
</code></pre>
<pre><code># Set multiple labels at once, using line-continuation characters to break long lines
LABEL vendor=ACME\ Incorporated \
      com.example.is-beta= \
      com.example.is-production=&quot;&quot; \
      com.example.version=&quot;0.0.1-beta&quot; \
      com.example.release-date=&quot;2015-02-12&quot;
</code></pre>
<h3 id="run">RUN</h3>
<pre><code>#è¯­æ³• ä¸¤ç§æ–¹å¼
RUN &lt;command&gt; #ä»¥shellå½¢å¼è¿è¡Œï¼Œé»˜è®¤ä¸º/bin/sh -cï¼ŒWindowsä¸Šé»˜è®¤ä¸ºcmd /S /Cï¼‰
RUN [&quot;executable&quot;, &quot;param1&quot;, &quot;param2&quot;] #ä¾‹å¦‚ RUN [&quot;/bin/bash&quot;, &quot;-c&quot;, &quot;echo hello&quot;]
</code></pre>
<p>æ³¨æ„å‡ ç‚¹ï¼š</p>
<ol>
<li>ä¸ºäº†é¿å…æ— ç”¨åˆ†å±‚ï¼Œåˆå¹¶å¤šæ¡å‘½ä»¤ä¸ºä¸€è¡Œã€‚</li>
<li><code>RUN /bin/bash</code>æ˜¯JSONæ ¼å¼ï¼Œå¿…é¡»ä½¿ç”¨åŒå¼•å·ã€‚</li>
</ol>
<h3 id="cmd">CMD</h3>
<pre><code>CMD [&quot;executable&quot;,&quot;param1&quot;,&quot;param2&quot;] #æ¨èexecæ–¹å¼
CMD [&quot;param1&quot;,&quot;param2&quot;] #é»˜è®¤å‚æ•°
CMD command param1 param2 #shellæ–¹å¼
</code></pre>
<ol>
<li>ä¸€ä¸ª<code>Dockerfile</code>ä¸­åªèƒ½æœ‰ä¸€æ¡<code>CMD</code>æŒ‡ä»¤ã€‚å¦‚æœæœ‰å¤šä¸ªï¼Œåªæœ‰æœ€åä¸€ä¸ªæœ‰æ•ˆã€‚</li>
<li>å¦‚æœ<code>CMD</code>ç”¨äºä¸º<code>ENTRYPOINT</code>æä¾›é»˜è®¤å‚æ•°ï¼Œé‚£ä¹ˆåº”è¯¥ä½¿ç”¨JSONæ•°ç»„æ ¼å¼è¿›è¡ŒæŒ‡å®šã€‚</li>
<li>JSONæ•°ç»„æ ¼å¼å¿…é¡»ä½¿ç”¨åŒå¼•å·ã€‚</li>
<li>shellæ–¹å¼è¿è¡Œä¸ä¼šæ‰§è¡Œå˜é‡æ›¿æ¢ã€‚
<ol>
<li>ä¾‹å¦‚<code>CMD [&quot;echo&quot;ï¼Œ &quot;$HOME&quot;]</code>ä¸ä¼šå¯¹<code>$HOME</code>æ‰§è¡Œå˜é‡æ›¿æ¢</li>
<li>å¦‚æœæƒ³è¦shellå¤„ç†ï¼Œä½¿ç”¨shellè¡¨å•æˆ–è€…æ‰§è¡Œshellã€‚ä¾‹å¦‚<code>CMD [&quot;sh&quot;ï¼Œ &quot;-c&quot;ï¼Œ &quot;echo $HOME&quot;]</code>ã€‚</li>
</ol>
</li>
</ol>
<h3 id="workdir">WORKDIR</h3>
<ol>
<li><code>WORKDIR</code>ç”¨äºå¯¹<code>RUN</code>,<code>CMD</code>, <code>ENTRYPOINT</code>è®¾ç½®å·¥ä½œç›®å½•ã€‚</li>
<li>å¦‚æœç›®å½•ä¸å­˜åœ¨åˆ™ä¼šè‡ªåŠ¨åˆ›å»ºã€‚</li>
<li><code>WORKDIR</code>å¯ä»¥åœ¨<code>Dockerfile</code>ä¸­è¿›è¡Œå¤šæ¬¡ä½¿ç”¨ã€‚</li>
<li><code>WORKDIR</code>å¯ä»¥è§£æ<code>ENV</code>çš„ç¯å¢ƒå˜é‡ã€‚</li>
<li>å¦‚æœæ˜¯ä¸€ä¸ªç›¸å¯¹ç›®å½•ï¼Œåˆ™æ˜¯<code>WORKDIR</code>ä¹‹å‰çš„ç›®å½•ã€‚</li>
<li>å°½é‡ä½¿ç”¨ç»å¯¹ç›®å½•ã€‚</li>
</ol>
<pre><code>WORKDIR /a
WORKDIR b
WORKDIR c
RUN pwd
#è¾“å‡ºä¸º/a/b/c
</code></pre>
<h3 id="add">ADD</h3>
<pre><code>#è¯­æ³• --chown åªèƒ½æ„å»ºLinuxå®¹å™¨çš„Dockerfiles
ADD [--chown=&lt;user&gt;:&lt;group&gt;] &lt;src&gt;... &lt;dest&gt;
ADD [--chown=&lt;user&gt;:&lt;group&gt;] [&quot;&lt;src&gt;&quot;,... &quot;&lt;dest&gt;&quot;]
</code></pre>
<ol>
<li><code>ADD</code> æŒ‡ä»¤å’Œ <code>COPY</code> çš„æ ¼å¼å’Œæ€§è´¨åŸºæœ¬ä¸€è‡´ã€‚ä½†æ˜¯åœ¨ <code>COPY</code> åŸºç¡€ä¸Šå¢åŠ äº†ä¸€äº›åŠŸèƒ½ã€‚</li>
<li>å¦‚æœURLæ–‡ä»¶å—èº«ä»½éªŒè¯ä¿æŠ¤ï¼Œåˆ™éœ€è¦ä½¿ç”¨RUN wgetï¼ŒRUN curlï¼Œå› ä¸ºADDæŒ‡ä»¤ä¸æ”¯æŒèº«ä»½éªŒè¯ã€‚</li>
<li>å½“è¦è¯»å–URLè¿œç¨‹èµ„æºçš„æ—¶å€™ï¼Œä¸æ¨èä½¿ç”¨ADDæŒ‡ä»¤ï¼Œè€Œæ˜¯å»ºè®®ä½¿ç”¨RUNæŒ‡ä»¤ï¼Œåœ¨RUNæŒ‡ä»¤ä¸­æ‰§è¡Œwgetæˆ–curlå‘½ä»¤ã€‚</li>
<li>å¦‚æœæºæ–‡ä»¶æ˜¯ä¸ªå½’æ¡£æ–‡ä»¶ï¼ˆå‹ç¼©æ–‡ä»¶ï¼‰ï¼Œåˆ™dockerä¼šè‡ªåŠ¨å¸®è§£å‹ã€‚</li>
</ol>
<h3 id="copy">COPY</h3>
<pre><code>COPY [--chown=&lt;user&gt;:&lt;group&gt;] &lt;src&gt;... &lt;dest&gt;
COPY [--chown=&lt;user&gt;:&lt;group&gt;] [&quot;&lt;src&gt;&quot;,... &quot;&lt;dest&gt;&quot;]
</code></pre>
<ol>
<li><code>COPY</code> æŒ‡ä»¤å°†ä»æ„å»ºä¸Šä¸‹æ–‡ç›®å½•ä¸­ <code>&lt;æºè·¯å¾„&gt;</code> çš„æ–‡ä»¶/ç›®å½•å¤åˆ¶åˆ°æ–°çš„ä¸€å±‚çš„é•œåƒå†…çš„ <code>&lt;ç›®æ ‡è·¯å¾„&gt;</code> ä½ç½®ã€‚</li>
<li><code>&lt;æºè·¯å¾„&gt;</code>è·¯å¾„å¿…é¡»åœ¨æ„å»ºçš„ä¸Šä¸‹æ–‡ç›®å½•ä¸­ï¼Œä¸èƒ½ä½¿ç”¨ <code>ADD ../something /something</code>ã€‚</li>
<li><code>&lt;æºè·¯å¾„&gt;</code> å¯ä»¥æ˜¯å¤šä¸ªï¼Œç”šè‡³å¯ä»¥æ˜¯é€šé…ç¬¦ï¼Œå…¶é€šé…ç¬¦è§„åˆ™è¦æ»¡è¶³ Go çš„ <a href="https://golang.org/pkg/path/filepath/#Match"><code>filepath.Match</code></a> è§„åˆ™ã€‚</li>
</ol>
<pre><code>COPY hom* /mydir/
COPY hom?.txt /mydir/
</code></pre>
<ol>
<li>ç›®æ ‡è·¯å¾„ä¸éœ€è¦äº‹å…ˆåˆ›å»ºï¼Œå¦‚æœç›®å½•ä¸å­˜åœ¨ä¼šåœ¨å¤åˆ¶æ–‡ä»¶å‰å…ˆè¡Œåˆ›å»ºç¼ºå¤±ç›®å½•ã€‚</li>
<li>æ»¡è¶³åŒç­‰åŠŸèƒ½çš„æƒ…å†µä¸‹ï¼Œæ¨èä½¿ç”¨<code>COPY</code>æŒ‡ä»¤ã€‚<code>ADD</code>æŒ‡ä»¤æ›´æ“…é•¿è¯»å–æœ¬åœ°taræ–‡ä»¶å¹¶è§£å‹ç¼©ã€‚</li>
</ol>
<h3 id="env">ENV</h3>
<pre><code>#è¯­æ³•ã€‚ENVæŒ‡ä»¤å°†ç¯å¢ƒå˜é‡&lt;key&gt;è®¾ç½®ä¸ºå€¼&lt;value&gt;ã€‚
ENV &lt;key&gt; &lt;value&gt;
ENV &lt;key&gt;=&lt;value&gt; 
#example
ENV myName John Doe
ENV myDog Rex The Dog
ENV myCat fluffy
#example
ENV myName=&quot;John Doe&quot; myDog=Rex\ The\ Dog \
    myCat=fluffy
</code></pre>
<ol>
<li>å°½é‡ä½¿ç”¨evn å¢åŠ å¯ç»´æŠ¤æ€§</li>
<li>ç¬¬ä¸€ç§è¯­æ³•<code>ENV &lt;key&gt; &lt;value&gt;</code>ç¬¬ä¸€ä¸ªç©ºæ ¼ä¹‹åçš„æ•´ä¸ªå­—ç¬¦ä¸²å°†è¢«è§†ä¸º<value>åŒ…æ‹¬ç©ºç™½å­—ç¬¦ã€‚</li>
<li>ç¬¬äºŒç§è¯­æ³•<code>&lt;key&gt;=&lt;value&gt;</code>å…è®¸åŒæ—¶è®¾ç½®å¤šä¸ªå˜é‡ã€‚</li>
<li>ä½¿ç”¨<code>docker inspect</code>æŸ¥çœ‹è¿™äº›å€¼ã€‚</li>
<li>ä½¿ç”¨<code>docker run --env &lt;key&gt;=&lt;value&gt;</code>æ›´æ”¹å®ƒä»¬ã€‚</li>
</ol>
<h3 id="volume">VOLUME</h3>
<pre><code>VOLUME [&quot;/data&quot;]
</code></pre>
<ol>
<li>åœ¨dockerè¿è¡Œæ—¶ï¼Œdockerä¼šåˆ›å»ºä¸€ä¸ªåŒ¿åçš„<code>volume</code>ï¼Œå¹¶å°†æ­¤<code>volume</code>ç»‘å®šåˆ°å®¹å™¨çš„/dataç›®å½•ä¸­ã€‚</li>
<li>Dockerfileä¸­çš„<code>valume</code>æ¯æ¬¡è¿è¡Œä¸€ä¸ªå®¹å™¨éƒ½ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªåŒ¿å<code>volume</code>ã€‚</li>
<li>å¦‚æœå®¹å™¨ä¹‹é—´è¦å…±äº«æ•°æ®éœ€è¦é€šè¿‡<code>docker run -v mydata:/data</code>æ›¿ä»£äº† Dockerfile ä¸­å®šä¹‰çš„åŒ¿åå·çš„æŒ‚è½½é…ç½®ã€‚</li>
</ol>
<h3 id="expose">EXPOSE</h3>
<pre><code>EXPOSE &lt;port&gt; [&lt;port&gt;/&lt;protocol&gt;...]
</code></pre>
<ol>
<li><code>EXPOSE</code> æŒ‡ä»¤æ˜¯å£°æ˜è¿è¡Œæ—¶å®¹å™¨æä¾›æœåŠ¡ç«¯å£ï¼Œè¿™åªæ˜¯ä¸€ä¸ªå£°æ˜ï¼Œåœ¨è¿è¡Œæ—¶å¹¶ä¸ä¼šå› ä¸ºè¿™ä¸ªå£°æ˜åº”ç”¨å°±ä¼šå¼€å¯è¿™ä¸ªç«¯å£çš„æœåŠ¡ã€‚</li>
<li>åœ¨ Dockerfile ä¸­å†™å…¥è¿™æ ·çš„å£°æ˜æœ‰ä¸¤ä¸ªå¥½å¤„ã€‚
<ol>
<li>å¸®åŠ©é•œåƒä½¿ç”¨è€…ç†è§£è¿™ä¸ªé•œåƒæœåŠ¡çš„å®ˆæŠ¤ç«¯å£ï¼Œä»¥æ–¹ä¾¿é…ç½®æ˜ å°„ã€‚</li>
<li>å¦ä¸€ä¸ªç”¨å¤„åˆ™æ˜¯åœ¨è¿è¡Œæ—¶ä½¿ç”¨éšæœºç«¯å£æ˜ å°„æ—¶ï¼Œä¹Ÿå°±æ˜¯ <code>docker run -P</code> æ—¶ï¼Œä¼šè‡ªåŠ¨éšæœºæ˜ å°„ <code>EXPOSE</code> çš„ç«¯å£ã€‚</li>
</ol>
</li>
<li>å¯ä»¥æŒ‡å®šç«¯å£ç›‘å¬TCPè¿˜æ˜¯UDPï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šåè®®ï¼Œåˆ™é»˜è®¤ä¸ºTCPã€‚</li>
</ol>
<pre><code>EXPOSE 80/tcp #tcp
EXPOSE 80/udp #udp
</code></pre>
<h3 id="entrypoint">ENTRYPOINT</h3>
<pre><code>ENTRYPOINT [&quot;executable&quot;, &quot;param1&quot;, &quot;param2&quot;] #execæ ¼å¼
ENTRYPOINT command param1 param2 #shellæ ¼å¼
</code></pre>
<ol>
<li><code>ENTRYPOINT</code> çš„ç›®çš„å’Œ <code>CMD</code> ä¸€æ ·ï¼Œéƒ½æ˜¯åœ¨æŒ‡å®šå®¹å™¨å¯åŠ¨ç¨‹åºåŠå‚æ•°ã€‚</li>
<li>å½“æŒ‡å®šäº† <code>ENTRYPOINT</code> åï¼Œ<code>CMD</code> çš„å«ä¹‰å°±å‘ç”Ÿäº†æ”¹å˜ï¼Œä¸å†æ˜¯ç›´æ¥çš„è¿è¡Œå…¶å‘½ä»¤ï¼Œè€Œæ˜¯å°† <code>CMD</code> çš„å†…å®¹ä½œä¸ºå‚æ•°ä¼ ç»™ <code>ENTRYPOINT</code> æŒ‡ä»¤<code>&lt;ENTRYPOINT&gt; &quot;&lt;CMD&gt;&quot;</code>ã€‚</li>
</ol>
<h2 id="nuxt-demoä¸€ä¸ªç®€å•çš„dockerfile">nuxt-demoä¸€ä¸ªç®€å•çš„Dockerfile</h2>
<pre><code class="language-shell">yarn create nuxt-app hello-world
</code></pre>
<pre><code>FROM node:lts
ENV HOST 0.0.0.0
WORKDIR /app
COPY . /app
RUN yarn &amp;&amp; yarn build
CMD [&quot;yarn&quot;, &quot;start&quot;]
</code></pre>
<h2 id="å®˜æ–¹å‚è€ƒæ–‡æ¡£">å®˜æ–¹å‚è€ƒæ–‡æ¡£</h2>
<blockquote>
<p>Dockerfileæ–‡æ¡£ï¼šhttps://docs.docker.com/engine/reference/builder/</p>
<p>docker-libraryï¼šhttps://github.com/docker-library</p>
</blockquote>
<br/>
<br/>
<br/>
<blockquote>
<p>æœ¬æ–‡æ ‡é¢˜ï¼š Dockerfileè¯­æ³•æ¢³ç†<br>
æœ¬æ–‡ä½œè€…ï¼š æ–¹ä¹™ç™¾<br>
æœ¬æ–‡é“¾æ¥ï¼š https://fangyibai.github.io/post/dockerfile-clear-up/<br>
ç‰ˆæƒå£°æ˜ï¼š æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·ä¿ç•™åŸæ–‡é“¾æ¥åŠä½œè€…ï¼</p>
</blockquote>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[vagrantæ­å»ºå¼€å‘ç¯å¢ƒ]]></title>
        <id>https://fangyibai.github.io/post/vagrant-dev-env/</id>
        <link href="https://fangyibai.github.io/post/vagrant-dev-env/">
        </link>
        <updated>2020-03-21T16:13:03.000Z</updated>
        <content type="html"><![CDATA[<h3 id="vagrantä»‹ç»">vagrantä»‹ç»</h3>
<blockquote>
<p>Vagrantæ˜¯ä¸€æ¬¾ç”¨äºæ„å»ºåŠé…ç½®è™šæ‹Ÿå¼€å‘ç¯å¢ƒçš„è½¯ä»¶ï¼ŒåŸºäºRuby,ä¸»è¦ä»¥å‘½ä»¤è¡Œçš„æ–¹å¼è¿è¡Œã€‚ä¸»è¦ä½¿ç”¨Oracleçš„å¼€æºVirtualBoxè™šæ‹ŸåŒ–ç³»ç»Ÿï¼Œä¸Chefï¼ŒSaltï¼ŒPuppetç­‰ç¯å¢ƒé…ç½®ç®¡ç†è½¯ä»¶æ­é…ä½¿ç”¨ï¼Œ å¯ä»¥å®è¡Œå¿«é€Ÿè™šæ‹Ÿå¼€å‘ç¯å¢ƒçš„æ„å»ºã€‚</p>
</blockquote>
<p>Vagrantç›®å‰æ˜¯å›½å†…äº’è”ç½‘å…¬å¸åº”ç”¨æœ€å¤šçš„å†…éƒ¨å¼€å‘ç¯å¢ƒå·¥å…·ã€‚Vagrantæ˜¯æˆ‘ä»¬å¼€å‘è€…çš„ç¦éŸ³ï¼Œä½¿æˆ‘ä»¬å®Œå…¨æ‘†è„±äº†é‡å¤é…ç½®ç¯å¢ƒçš„å¤„å¢ƒã€‚Vagrantç®€å•çš„é…ç½®ï¼Œä¸°å¯Œçš„è‡ªåŠ¨åŒ–è„šæœ¬èµ„æºä»¥åŠåˆ†äº«çš„ä¾¿æ·æ€§éƒ½æ˜¯æˆ‘ä»¬åº”è¯¥å­¦ä¹ çš„æ€æƒ³ï¼ŒèŠ‚çœå¼€å‘äººå‘˜çš„å¤§é‡å‡†å¤‡å·¥ä½œæ—¶é—´,ä½¿å¼€å‘äººå‘˜æ›´ä¸“æ³¨å…¬å¸ä¸šåŠ¡å¼€å‘ã€‚</p>
<h3 id="å®‰è£…æ–‡æ¡£">å®‰è£…æ–‡æ¡£</h3>
<p>ä½¿ç”¨ VirtualBox æ¥æ­å»ºè™šæ‹Ÿæœºï¼Œä¸»è¦æ˜¯å…è´¹ã€‚</p>
<p>Vagrant ä¹Ÿæ”¯æŒ VMwareï¼Œä¸è¿‡ VMware æ˜¯æ”¶è´¹çš„ï¼Œå¯¹åº”çš„ Vagrant ç‰ˆæœ¬ä¹Ÿæ˜¯æ”¶è´¹çš„ã€‚</p>
<h4 id="å®‰è£…virtualbox">å®‰è£…VirtualBox</h4>
<p>å®˜æ–¹ä¸‹è½½åœ°å€ï¼šhttps://www.virtualbox.org/wiki/Downloads</p>
<h4 id="å®‰è£…-vagrant">å®‰è£… Vagrant</h4>
<p>å®˜æ–¹ä¸‹è½½åœ°å€ï¼šhttps://www.vagrantup.com/downloads.html</p>
<p>å®Œæˆåä½¿ç”¨å‘½ä»¤ <code>vagrant --help</code> ä¼šæç¤ºvagrantæ”¯æŒçš„å‘½ä»¤å’Œå‚æ•°</p>
<h3 id="åˆ›å»ºä¸€ä¸ªcentos7">åˆ›å»ºä¸€ä¸ªcentos7</h3>
<p><code>vagrant init centos/7</code> åˆå§‹åŒ–è™šæ‹Ÿæœºï¼Œä¼šç”Ÿæˆä¸€ä¸ªVagrantfileæ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶æè¿°äº†è¦åˆ›å»ºä»€ä¹ˆæ ·çš„è™šæ‹Ÿæœºã€‚</p>
<p><code>vagrant up</code> å¯åŠ¨è™šæ‹Ÿæœºï¼Œå¦‚æœæœ¬åœ°å·²ç»æœ‰boxæ–‡ä»¶ä¼šç›´æ¥åŠ è½½ï¼Œå¦‚æœä¸å­˜åœ¨ä¼šè‡ªåŠ¨æ‹‰å–ã€‚</p>
<p>åœ¨å½“å‰ç›®å½•è¿è¡Œ<code>vagrant ssh</code>ä¼šè¿›å…¥åˆ°centosé‡Œå»ã€‚</p>
<p>vagrantæœ‰ä¸€ä¸ªç½‘ç«™<a href="https://app.vagrantup.com/">VagrantCloud</a>æƒ³è¦åˆ›å»ºå…¶å®ƒè™šæ‹Ÿæœºï¼Œå¯ä»¥åœ¨<a href="https://app.vagrantup.com/">VagrantCloud</a>æœç´¢æƒ³è¦çš„Vagrantfileã€‚</p>
<p>æ¯”å¦‚æƒ³è¦ä¸€ä¸ªubuntuçš„ç³»ç»Ÿï¼Œç›´æ¥è´´åˆ°Vagrantfileé‡Œå³å¯ä½¿ç”¨äº†ã€‚</p>
<pre><code>Vagrant.configure(&quot;2&quot;) do |config|
  config.vm.box = &quot;ubuntu/trusty64&quot;
end
</code></pre>
<h3 id="vagrantfileæ–‡ä»¶æè¿°">Vagrantfileæ–‡ä»¶æè¿°</h3>
<pre><code>#ç«¯å£æ˜ å°„ï¼šå°†guestè™šæ‹Ÿæœºçš„ç«¯å£æ˜ å°„åˆ°hostç‰©ç†æœºçš„ç«¯å£
config.vm.network &quot;forwarded_port&quot;, guest: 80, host: 8080
#è®¾ç½®ç§æœ‰ç½‘ç»œ,åªæœ‰ç‰©ç†æœºèƒ½è¿›è¡Œé€šä¿¡
config.vm.network &quot;private_network&quot;, ip: &quot;192.168.33.10&quot;
#è®¾ç½®å…¬å…±ç½‘ç»œ
# config.vm.network &quot;public_network&quot;
#å…±äº«æ–‡ä»¶å¤¹
config.vm.synced_folder &quot;../data&quot;, &quot;/vagrant_data&quot;
#å¯åŠ¨åæ‰§è¡Œshellå‘½ä»¤
config.vm.provision &quot;shell&quot;, inline: &lt;&lt;-SHELL
  apt-get update
  apt-get install -y apache2
SHELL
</code></pre>
<h3 id="ä½¿ç”¨vagrantfileåˆ›å»ºå¤æ‚ç¯å¢ƒ">ä½¿ç”¨Vagrantfileåˆ›å»ºå¤æ‚ç¯å¢ƒ</h3>
<p>åˆ›å»º3å°å¸¦dockerç¯å¢ƒçš„è™šæ‹Ÿæœºï¼Œç›¸äº’ä¹‹é—´å¯è¿›è¡Œé€šä¿¡ã€‚</p>
<ul>
<li>Vagrantfileé…ç½®</li>
</ul>
<pre><code># -*- mode: ruby -*-
# vi: set ft=ruby :

Vagrant.require_version &quot;&gt;= 1.6.0&quot;

boxes = [
    {
        :name =&gt; &quot;swarm-manager&quot;,
        :eth1 =&gt; &quot;192.168.205.10&quot;,
        :mem =&gt; &quot;1024&quot;,
        :cpu =&gt; &quot;1&quot;
    },
    {
        :name =&gt; &quot;swarm-worker1&quot;,
        :eth1 =&gt; &quot;192.168.205.11&quot;,
        :mem =&gt; &quot;1024&quot;,
        :cpu =&gt; &quot;1&quot;
    },
    {
        :name =&gt; &quot;swarm-worker2&quot;,
        :eth1 =&gt; &quot;192.168.205.12&quot;,
        :mem =&gt; &quot;1024&quot;,
        :cpu =&gt; &quot;1&quot;
    }
]

Vagrant.configure(2) do |config|

  config.vm.box = &quot;centos7_docker_swarm&quot;

  boxes.each do |opts|
      config.vm.define opts[:name] do |config|
        config.vm.hostname = opts[:name]
        config.vm.provider &quot;vmware_fusion&quot; do |v|
          v.vmx[&quot;memsize&quot;] = opts[:mem]
          v.vmx[&quot;numvcpus&quot;] = opts[:cpu]
        end

        config.vm.provider &quot;virtualbox&quot; do |v|
          v.customize [&quot;modifyvm&quot;, :id, &quot;--memory&quot;, opts[:mem]]
          v.customize [&quot;modifyvm&quot;, :id, &quot;--cpus&quot;, opts[:cpu]]
        end

        config.vm.network :private_network, ip: opts[:eth1]
      end
  end
  
  config.vm.provision &quot;shell&quot;, privileged: true, path: &quot;./setup.sh&quot;

end

</code></pre>
<ul>
<li>setup.sh</li>
</ul>
<pre><code class="language-shell">#/bin/sh

# install some tools
sudo yum install -y git vim gcc glibc-static telnet bridge-utils

# install docker
curl -fsSL get.docker.com -o get-docker.sh
sh get-docker.sh

# start docker service
sudo groupadd docker
sudo gpasswd -a vagrant docker
sudo systemctl start docker

rm -rf get-docker.sh

</code></pre>
<h3 id="ç¯å¢ƒæ‰“åŒ…">ç¯å¢ƒæ‰“åŒ…</h3>
<p><code>vagrant package</code>å‘½ä»¤æ‰“åŒ…å®Œæˆåä¼šåœ¨å½“å‰ç›®å½•ç”Ÿæˆä¸€ä¸ª <code>package.box</code> çš„æ–‡ä»¶ï¼Œå°†è¿™ä¸ªæ–‡ä»¶ä¼ ç»™å…¶ä»–ç”¨æˆ·ï¼Œå…¶ä»–ç”¨æˆ·åªè¦æ·»åŠ è¿™ä¸ª box å¹¶ç”¨å…¶åˆå§‹åŒ–è‡ªå·±çš„å¼€å‘ç›®å½•å°±èƒ½å¾—åˆ°ä¸€ä¸ªä¸€æ¨¡ä¸€æ ·çš„å¼€å‘ç¯å¢ƒäº†ã€‚</p>
<p>ä½¿ç”¨<code>vagrant package --help</code>æŸ¥çœ‹å…¶å®ƒå‚æ•°ç”¨æ³•</p>
<pre><code>    --base NAME                  Name of a VM in VirtualBox to package as a base box (VirtualBox Only)
    --output NAME                Name of the file to output
    --include FILE,FILE..        Comma separated additional files to package with the box
    --vagrantfile FILE           Vagrantfile to package with the box
-h, --help                       Print this help
</code></pre>
<p>æ³¨æ„æ‰“åŒ…éœ€é€€å‡ºå¹¶å…³é—­è™šæ‹Ÿæœºã€‚</p>
<h3 id="å¸¸ç”¨å‘½ä»¤">å¸¸ç”¨å‘½ä»¤</h3>
<h4 id="boxç®¡ç†å‘½ä»¤">boxç®¡ç†å‘½ä»¤</h4>
<table>
<thead>
<tr>
<th style="text-align:left">å‘½ä»¤</th>
<th style="text-align:left">æ³¨é‡Š</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">vagrant box list</td>
<td style="text-align:left">æŸ¥çœ‹æœ¬åœ°boxåˆ—è¡¨</td>
</tr>
<tr>
<td style="text-align:left">vagrant box add</td>
<td style="text-align:left">æ·»åŠ boxåˆ°åˆ—è¡¨</td>
</tr>
<tr>
<td style="text-align:left">vagrant box remove</td>
<td style="text-align:left">ä»boxåˆ—è¡¨ç§»é™¤</td>
</tr>
</tbody>
</table>
<h4 id="vagrantå‘½ä»¤">vagrantå‘½ä»¤</h4>
<table>
<thead>
<tr>
<th style="text-align:left">å‘½ä»¤</th>
<th style="text-align:left">æ³¨é‡Š</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">vagrant init</td>
<td style="text-align:left">åˆå§‹åŒ–</td>
</tr>
<tr>
<td style="text-align:left">vagrant up</td>
<td style="text-align:left">å¯åŠ¨è™šæ‹Ÿæœº</td>
</tr>
<tr>
<td style="text-align:left">vagrant halt</td>
<td style="text-align:left">å…³é—­è™šæ‹Ÿæœº</td>
</tr>
<tr>
<td style="text-align:left">vagrant reload</td>
<td style="text-align:left">é‡å¯è™šæ‹Ÿæœº</td>
</tr>
<tr>
<td style="text-align:left">vagrant ssh</td>
<td style="text-align:left">SSHè¿›å…¥è™šæ‹Ÿæœº</td>
</tr>
<tr>
<td style="text-align:left">vagrant suspend</td>
<td style="text-align:left">æŒ‚èµ·è™šæ‹Ÿæœº</td>
</tr>
<tr>
<td style="text-align:left">vagrant resume</td>
<td style="text-align:left">å”¤é†’è™šæ‹Ÿæœº</td>
</tr>
<tr>
<td style="text-align:left">vagrant status</td>
<td style="text-align:left">æŸ¥çœ‹è™šæ‹Ÿæœºè¿è¡ŒçŠ¶æ€</td>
</tr>
<tr>
<td style="text-align:left">vagrant destroy</td>
<td style="text-align:left">é”€æ¯å½“å‰è™šæ‹Ÿæœº</td>
</tr>
</tbody>
</table>
<h3 id="å¸¸è§é—®é¢˜">å¸¸è§é—®é¢˜</h3>
<ol>
<li>
<p>åœ¨å®‰è£…ä¸€äº›è½¯ä»¶æ—¶éœ€è¦ç¡®è®¤å¯†ç ï¼Œé»˜è®¤è´¦å·/å¯†ç æ˜¯<code>vagrant/vagrant</code>ï¼Œrootè´¦å·/å¯†ç ï¼š<code>root/vagrant</code></p>
</li>
<li>
<p>è‡ªåŠ¨ä¸‹è½½æ‹‰å–é•œåƒå¤ªæ…¢ï¼Œå»ºè®®æ‰‹åŠ¨ä¸‹è½½é•œåƒã€‚</p>
<pre><code>vagrant box add {title} {url}
vagrant init {title}
vagrant up
</code></pre>
</li>
<li>
<p>æ­¤æ–‡æ‰€ç”¨ç‰ˆæœ¬</p>
<ul>
<li>
<blockquote>
<p>VirtualBox 6.1.4</p>
</blockquote>
</li>
<li>
<blockquote>
<p>vagrant 2.2.7</p>
</blockquote>
</li>
<li>
<blockquote>
<p>iTrem2  3.2.0</p>
</blockquote>
</li>
</ul>
</li>
</ol>
<h3 id="æ‰©å±•èµ„æ–™">æ‰©å±•èµ„æ–™</h3>
<p>å®˜ç½‘æ–‡æ¡£ï¼š</p>
<blockquote>
<p>vagrantï¼šhttps://www.vagrantup.com/docs/</p>
</blockquote>
<blockquote>
<p>Vagrantfileï¼šhttps://www.vagrantup.com/docs/vagrantfile/</p>
</blockquote>
<blockquote>
<p>é•œåƒæœç´¢ï¼šhttps://app.vagrantup.com/boxes/search</p>
</blockquote>
<br/>
<br/>
<br/>
<blockquote>
<p>æœ¬æ–‡æ ‡é¢˜ï¼š vagrantæ­å»ºå¼€å‘ç¯å¢ƒ<br>
æœ¬æ–‡ä½œè€…ï¼š æ–¹ä¹™ç™¾<br>
æœ¬æ–‡é“¾æ¥ï¼š https://fangyibai.github.io/post/vagrant-dev-env/<br>
ç‰ˆæƒå£°æ˜ï¼š æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·ä¿ç•™åŸæ–‡é“¾æ¥åŠä½œè€…ï¼</p>
</blockquote>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Hello Gridea]]></title>
        <id>https://fangyibai.github.io/post/hello-gridea/</id>
        <link href="https://fangyibai.github.io/post/hello-gridea/">
        </link>
        <updated>2018-12-11T16:00:00.000Z</updated>
        <summary type="html"><![CDATA[<p>ğŸ‘  æ¬¢è¿ä½¿ç”¨ <strong>Gridea</strong> ï¼<br>
âœï¸  <strong>Gridea</strong> ä¸€ä¸ªé™æ€åšå®¢å†™ä½œå®¢æˆ·ç«¯ã€‚ä½ å¯ä»¥ç”¨å®ƒæ¥è®°å½•ä½ çš„ç”Ÿæ´»ã€å¿ƒæƒ…ã€çŸ¥è¯†ã€ç¬”è®°ã€åˆ›æ„... ...</p>
]]></summary>
        <content type="html"><![CDATA[<p>ğŸ‘  æ¬¢è¿ä½¿ç”¨ <strong>Gridea</strong> ï¼<br>
âœï¸  <strong>Gridea</strong> ä¸€ä¸ªé™æ€åšå®¢å†™ä½œå®¢æˆ·ç«¯ã€‚ä½ å¯ä»¥ç”¨å®ƒæ¥è®°å½•ä½ çš„ç”Ÿæ´»ã€å¿ƒæƒ…ã€çŸ¥è¯†ã€ç¬”è®°ã€åˆ›æ„... ...</p>
<!-- more -->
<p><a href="https://github.com/getgridea/gridea">Github</a><br>
<a href="https://gridea.dev/">Gridea ä¸»é¡µ</a><br>
<a href="http://fehey.com/">ç¤ºä¾‹ç½‘ç«™</a></p>
<h2 id="ç‰¹æ€§">ç‰¹æ€§ğŸ‘‡</h2>
<p>ğŸ“  ä½ å¯ä»¥ä½¿ç”¨æœ€é…·çš„ <strong>Markdown</strong> è¯­æ³•ï¼Œè¿›è¡Œå¿«é€Ÿåˆ›ä½œ</p>
<p>ğŸŒ‰  ä½ å¯ä»¥ç»™æ–‡ç« é…ä¸Šç²¾ç¾çš„å°é¢å›¾å’Œåœ¨æ–‡ç« ä»»æ„ä½ç½®æ’å…¥å›¾ç‰‡</p>
<p>ğŸ·ï¸  ä½ å¯ä»¥å¯¹æ–‡ç« è¿›è¡Œæ ‡ç­¾åˆ†ç»„</p>
<p>ğŸ“‹  ä½ å¯ä»¥è‡ªå®šä¹‰èœå•ï¼Œç”šè‡³å¯ä»¥åˆ›å»ºå¤–éƒ¨é“¾æ¥èœå•</p>
<p>ğŸ’»  ä½ å¯ä»¥åœ¨ <strong>Windows</strong>ï¼Œ<strong>MacOS</strong> æˆ– <strong>Linux</strong> è®¾å¤‡ä¸Šä½¿ç”¨æ­¤å®¢æˆ·ç«¯</p>
<p>ğŸŒ  ä½ å¯ä»¥ä½¿ç”¨ <strong>ğ–¦ğ—‚ğ—ğ—ğ—ğ–» ğ–¯ğ–ºğ—€ğ–¾ğ—Œ</strong> æˆ– <strong>Coding Pages</strong> å‘ä¸–ç•Œå±•ç¤ºï¼Œæœªæ¥å°†æ”¯æŒæ›´å¤šå¹³å°</p>
<p>ğŸ’¬  ä½ å¯ä»¥è¿›è¡Œç®€å•çš„é…ç½®ï¼Œæ¥å…¥ <a href="https://github.com/gitalk/gitalk">Gitalk</a> æˆ– <a href="https://github.com/SukkaW/DisqusJS">DisqusJS</a> è¯„è®ºç³»ç»Ÿ</p>
<p>ğŸ‡¬ğŸ‡§  ä½ å¯ä»¥ä½¿ç”¨<strong>ä¸­æ–‡ç®€ä½“</strong>æˆ–<strong>è‹±è¯­</strong></p>
<p>ğŸŒ  ä½ å¯ä»¥ä»»æ„ä½¿ç”¨åº”ç”¨å†…é»˜è®¤ä¸»é¢˜æˆ–ä»»æ„ç¬¬ä¸‰æ–¹ä¸»é¢˜ï¼Œå¼ºå¤§çš„ä¸»é¢˜è‡ªå®šä¹‰èƒ½åŠ›</p>
<p>ğŸ–¥  ä½ å¯ä»¥è‡ªå®šä¹‰æºæ–‡ä»¶å¤¹ï¼Œåˆ©ç”¨ OneDriveã€ç™¾åº¦ç½‘ç›˜ã€iCloudã€Dropbox ç­‰è¿›è¡Œå¤šè®¾å¤‡åŒæ­¥</p>
<p>ğŸŒ± å½“ç„¶ <strong>Gridea</strong> è¿˜å¾ˆå¹´è½»ï¼Œæœ‰å¾ˆå¤šä¸è¶³ï¼Œä½†è¯·ç›¸ä¿¡ï¼Œå®ƒä¼šä¸åœå‘å‰ ğŸƒ</p>
<p>æœªæ¥ï¼Œå®ƒä¸€å®šä¼šæˆä¸ºä½ ç¦»ä¸å¼€çš„ä¼™ä¼´</p>
<p>å°½æƒ…å‘æŒ¥ä½ çš„æ‰åå§ï¼</p>
<p>ğŸ˜˜ Enjoy~</p>
]]></content>
    </entry>
</feed>